{% extends "base.html" %}

{% block title %}About{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 offset-md-2">
        <h1>About HuduGlue</h1>

        <div class="card mb-4">
            <div class="card-body">
                <h3>Version Information</h3>
                <dl class="row mb-0">
                    <dt class="col-sm-4">Version:</dt>
                    <dd class="col-sm-8"><code>{{ full_version }}</code></dd>
                    <dt class="col-sm-4">Release Date:</dt>
                    <dd class="col-sm-8">January 2026</dd>
                    <dt class="col-sm-4">Status:</dt>
                    <dd class="col-sm-8"><span class="badge bg-success">Production Ready</span></dd>
                </dl>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h3>Platform Overview</h3>
                <p>
                    A complete, self-hosted IT documentation platform designed for managed service providers (MSPs) and IT departments.
                    Provides secure asset management, encrypted password vault, knowledge base, and PSA integrations.
                </p>

                <h5>Core Features</h5>
                <ul>
                    <li><strong>Multi-Tenancy:</strong> Organization-based data isolation with granular RBAC (42 permissions)</li>
                    <li><strong>MSP User Types:</strong> Staff users (global access), Organization users (scoped access), Role templates</li>
                    <li><strong>Asset Management:</strong> Flexible device tracking with custom fields and relationships</li>
                    <li><strong>Password Vault:</strong> AES-GCM encrypted secrets with folder organization</li>
                    <li><strong>Personal Vault:</strong> Private password storage per user</li>
                    <li><strong>Documentation:</strong> Per-org docs with categories, tags, filtering, and version control</li>
                    <li><strong>Global Knowledge Base:</strong> Staff-only internal KB with full markdown support</li>
                    <li><strong>Website Monitoring:</strong> Uptime checks with SSL certificate tracking</li>
                    <li><strong>Infrastructure:</strong> NetBox-style rack visualization + IPAM with VLANs</li>
                    <li><strong>Secure Notes:</strong> Encrypted ephemeral messaging with self-destruct</li>
                    <li><strong>PSA Integration:</strong> ConnectWise Manage, Autotask, and more</li>
                    <li><strong>REST API:</strong> Full CRUD with API key authentication</li>
                    <li><strong>Audit Logging:</strong> Complete activity tracking with export</li>
                    <li><strong>Contact Management:</strong> Organization-specific contact tracking</li>
                    <li><strong>Task Scheduler:</strong> Automated jobs via systemd timers (no Redis required)</li>
                    <li><strong>Directory Integration:</strong> LDAP and Azure AD support (optional)</li>
                </ul>

                <h5>Security Highlights</h5>
                <ul>
                    <li>Enforced TOTP two-factor authentication</li>
                    <li>Argon2 password hashing</li>
                    <li>AES-GCM encryption for sensitive data</li>
                    <li>Password breach detection (HaveIBeenPwned with k-anonymity)</li>
                    <li>HMAC-SHA256 hashed API keys</li>
                    <li>Brute-force protection (django-axes)</li>
                    <li>Rate limiting on all endpoints</li>
                    <li>Comprehensive security headers</li>
                    <li>Private file serving (X-Accel-Redirect)</li>
                </ul>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h3><i class="fas fa-database"></i> Hardware Equipment Catalog</h3>
                <p>
                    Comprehensive equipment database with major hardware vendors for MSP asset tracking and documentation.
                </p>
                <dl class="row mb-0">
                    <dt class="col-sm-4">Total Vendors:</dt>
                    <dd class="col-sm-8"><strong>{{ equipment_stats.vendor_count }}</strong> hardware manufacturers</dd>
                    <dt class="col-sm-4">Equipment Models:</dt>
                    <dd class="col-sm-8"><strong>{{ equipment_stats.model_count }}</strong> servers, workstations, switches, routers, phones</dd>
                    <dt class="col-sm-4">Coverage:</dt>
                    <dd class="col-sm-8">Dell, HPE, Lenovo, Cisco, Fortinet, Palo Alto, Ubiquiti, and more</dd>
                </dl>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h3>Technology Stack</h3>
                <table class="table table-sm mb-0">
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Technology</th>
                            <th>Version</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Framework</strong></td>
                            <td>Django</td>
                            <td><code>{{ dependencies.Django|default:"6.0" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>API</strong></td>
                            <td>Django REST Framework</td>
                            <td><code>{{ dependencies.djangorestframework|default:"3.15" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>Web Server</strong></td>
                            <td>Gunicorn</td>
                            <td><code>{{ dependencies.gunicorn|default:"22.0" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>Encryption</strong></td>
                            <td>Python cryptography</td>
                            <td><code>{{ dependencies.cryptography|default:"44.0" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>Image Processing</strong></td>
                            <td>Pillow</td>
                            <td><code>{{ dependencies.pillow|default:"10.3" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>HTTP Client</strong></td>
                            <td>Requests</td>
                            <td><code>{{ dependencies.requests|default:"2.32" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>AI Integration</strong></td>
                            <td>Anthropic SDK</td>
                            <td><code>{{ dependencies.anthropic|default:"0.45" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>2FA</strong></td>
                            <td>django-two-factor-auth</td>
                            <td><code>{{ dependencies.django_two_factor_auth|default:"1.17" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>Brute Force Protection</strong></td>
                            <td>django-axes</td>
                            <td><code>{{ dependencies.django_axes|default:"6.1" }}</code></td>
                        </tr>
                        <tr>
                            <td><strong>Database</strong></td>
                            <td>MariaDB</td>
                            <td><code>10.5+</code></td>
                        </tr>
                        <tr>
                            <td><strong>Password Hashing</strong></td>
                            <td>Argon2</td>
                            <td><code>OWASP Standard</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h3>PSA Integration Status</h3>
                <table class="table table-sm mb-0">
                    <thead>
                        <tr>
                            <th>Provider</th>
                            <th>Status</th>
                            <th>Features</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ConnectWise Manage</strong></td>
                            <td><span class="badge bg-success">Implemented</span></td>
                            <td>Companies, Contacts, Tickets, Projects, Agreements</td>
                        </tr>
                        <tr>
                            <td><strong>Autotask PSA</strong></td>
                            <td><span class="badge bg-success">Implemented</span></td>
                            <td>Companies, Contacts, Tickets, Projects, Agreements</td>
                        </tr>
                        <tr>
                            <td><strong>HaloPSA</strong></td>
                            <td><span class="badge bg-success">Implemented</span></td>
                            <td>Companies, Contacts, Tickets, OAuth2 Authentication</td>
                        </tr>
                        <tr>
                            <td><strong>Kaseya BMS</strong></td>
                            <td><span class="badge bg-success">Implemented</span></td>
                            <td>Companies, Contacts, Tickets, Projects, Agreements</td>
                        </tr>
                        <tr>
                            <td><strong>Syncro</strong></td>
                            <td><span class="badge bg-success">Implemented</span></td>
                            <td>Companies (Customers), Contacts, Tickets</td>
                        </tr>
                        <tr>
                            <td><strong>Freshservice</strong></td>
                            <td><span class="badge bg-success">Implemented</span></td>
                            <td>Companies (Departments), Contacts (Requesters), Tickets, Basic Auth</td>
                        </tr>
                        <tr>
                            <td><strong>Zendesk</strong></td>
                            <td><span class="badge bg-success">Implemented</span></td>
                            <td>Companies (Organizations), Contacts (Users), Tickets, Basic Auth</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h3><i class="fas fa-shield-alt"></i> Security & Vulnerability Scanning</h3>

                <div class="alert {% if scan_results.status == 'clean' %}alert-success{% else %}alert-warning{% endif %} mb-3">
                    <h5 class="alert-heading">
                        <i class="fas {% if scan_results.status == 'clean' %}fa-check-circle{% else %}fa-exclamation-triangle{% endif %}"></i>
                        Live CVE Scan Results
                    </h5>
                    <p class="mb-2">
                        This codebase has been scanned in real-time for all known CVEs (Common Vulnerabilities and Exposures) and security vulnerabilities.
                    </p>
                    <dl class="row mb-0">
                        <dt class="col-sm-4">Last CVE Scan:</dt>
                        <dd class="col-sm-8"><strong>{{ scan_results.scan_time|date:"F j, Y \a\t g:i A T" }}</strong></dd>
                        <dt class="col-sm-4">Scan Status:</dt>
                        <dd class="col-sm-8">
                            {% if scan_results.status == 'clean' %}
                                <span class="badge bg-success">âœ“ All Clear</span>
                            {% elif scan_results.status == 'vulnerabilities_found' %}
                                <span class="badge bg-warning">{{ scan_results.vulnerabilities }} Vulnerability(ies) Found</span>
                            {% else %}
                                <span class="badge bg-secondary">Scan Error</span>
                            {% endif %}
                        </dd>
                        <dt class="col-sm-4">Known Vulnerabilities:</dt>
                        <dd class="col-sm-8">
                            {% if scan_results.status == 'clean' %}
                                <span class="badge bg-success">0 Critical</span>
                                <span class="badge bg-success">0 High</span>
                                <span class="badge bg-success">0 Medium</span>
                            {% else %}
                                <span class="badge bg-warning">{{ scan_results.vulnerabilities|default:"Unknown" }} Total</span>
                            {% endif %}
                        </dd>
                        <dt class="col-sm-4">Scan Tool:</dt>
                        <dd class="col-sm-8"><code>pip-audit</code> (Python Package Vulnerability Scanner)</dd>
                    </dl>
                </div>

                <h5><i class="fas fa-key"></i> Enhanced Encryption v2</h5>
                <p>
                    All sensitive data is protected with <strong>military-grade AES-256-GCM encryption</strong> plus additional security layers:
                </p>
                <ul class="mb-3">
                    <li><strong>HKDF Key Derivation</strong>: Purpose-specific keys for passwords, TOTP secrets, API credentials</li>
                    <li><strong>Associated Authenticated Data (AAD)</strong>: Context binding prevents ciphertext reuse attacks</li>
                    <li><strong>Version Tagging</strong>: Graceful key rotation support with backward compatibility</li>
                    <li><strong>Memory Clearing</strong>: Best-effort clearing of sensitive data from memory</li>
                </ul>
                <div class="alert alert-info mb-3">
                    <small>
                        <strong>Standards Compliance:</strong> NIST SP 800-38D (GCM), NIST SP 800-108 (HKDF), FIPS 197 (AES),
                        NSA Suite B (TOP SECRET), OWASP ASVS Level 2
                    </small>
                </div>

                <h5><i class="fas fa-shield-virus"></i> Password Breach Detection</h5>
                <p>
                    All passwords in the vault are automatically checked against the HaveIBeenPwned database of 600+ million compromised passwords.
                    <strong>Your passwords never leave your server</strong> - we use k-anonymity where only 5 characters of a SHA-1 hash are transmitted.
                </p>
                <ul class="mb-3">
                    <li>Automatic breach detection on password save</li>
                    <li>Scheduled scanning at configurable intervals (2-24 hours)</li>
                    <li>Visual indicators: ðŸŸ¢ Safe, ðŸ”´ Compromised, âšª Unchecked</li>
                    <li>Zero-knowledge privacy protection</li>
                </ul>

                <h5><i class="fas fa-bug"></i> Vulnerability Scanning</h5>
                <ul class="mb-3">
                    <li><strong>CVE Scanning</strong>: All dependencies scanned against known vulnerability databases</li>
                    <li><strong>AI-Assisted Detection</strong>: Automated code analysis for SQL injection, XSS, CSRF, and more</li>
                    <li><strong>Alert-Only Mode</strong>: Findings generate alerts for human review (no automatic changes)</li>
                    <li><strong>Regular Updates</strong>: Weekly manual audits plus automated scanning on every commit</li>
                </ul>

                <h5><i class="fas fa-file-shield"></i> Security Documentation</h5>
                <p class="mb-0">
                    HuduGlue undergoes regular security audits with the assistance of Luna the GSD.
                    Complete security documentation including encryption architecture, breach detection, CVE scanning, and vulnerability response process:
                    <a href="https://github.com/agit8or1/huduglue/blob/main/SECURITY.md" target="_blank" class="btn btn-sm btn-outline-primary ms-2">
                        <i class="fas fa-book"></i> View SECURITY.md
                    </a>
                </p>
                <p class="mb-0">
                    <small class="text-muted">
                        If you discover a security issue, please email <a href="mailto:agit8or@agit8or.net">agit8or@agit8or.net</a>.
                    </small>
                </p>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h3>System Information</h3>
                <dl class="row mb-0">
                    <dt class="col-sm-4">Current Organization:</dt>
                    <dd class="col-sm-8">
                        {% if current_organization %}
                            {{ current_organization.name }}
                        {% else %}
                            <em class="text-muted">No organization selected</em>
                        {% endif %}
                    </dd>

                    <dt class="col-sm-4">User Role:</dt>
                    <dd class="col-sm-8">
                        {% if current_organization %}
                            {% for membership in user.memberships.all %}
                                {% if membership.organization == current_organization %}
                                    {{ membership.get_role_display }}
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <em class="text-muted">N/A</em>
                        {% endif %}
                    </dd>

                    <dt class="col-sm-4">Logged in as:</dt>
                    <dd class="col-sm-8">{{ user.username }}</dd>

                    <dt class="col-sm-4">2FA Status:</dt>
                    <dd class="col-sm-8">
                        <span class="badge bg-success">Enabled</span>
                    </dd>
                </dl>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h3>License & Credits</h3>
                <p>
                    Built with Django 6, Django REST Framework, django-two-factor-auth, django-axes,
                    Bootstrap 5, and other open-source technologies.
                </p>
                <p class="mb-0">
                    <strong>Deployment:</strong> Self-hosted on Ubuntu with MariaDB + Nginx + systemd<br>
                    <strong>Architecture:</strong> No Docker, no Redis - pure Python + systemd timers
                </p>
            </div>
        </div>

        <div class="card border-primary">
            <div class="card-body">
                <h3 class="text-primary"><i class="fas fa-heart"></i> Supporting This Project</h3>
                <p>
                    If you find HuduGlue useful for your MSP or IT department, please consider supporting the developer's business:
                </p>
                <p class="text-center mb-3">
                    <a href="https://www.mspreboot.com" target="_blank" class="btn btn-primary btn-lg">
                        <i class="fas fa-external-link-alt"></i> MSP Reboot
                    </a>
                </p>
                <p class="mb-0 text-muted small">
                    Professional MSP services and consulting. Your support allows me to continue developing open-source tools like HuduGlue and contribute to the MSP community. Thank you!
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
